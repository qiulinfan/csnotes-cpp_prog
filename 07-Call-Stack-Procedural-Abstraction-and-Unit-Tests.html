<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>Overview - umich-eecs280-lec-notes-ch</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Overview";
        var mkdocs_page_input_path = "07-Call-Stack-Procedural-Abstraction-and-Unit-Tests.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="index.html" class="icon icon-home"> umich-eecs280-lec-notes-ch
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="index.html">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">01 Command Line Interface (CLI)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="01-Command-Line%20Interface-%28CLI%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="01-Command-Line%20Interface-%28CLI%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="01-Command-Line%20Interface-%28CLI%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="01-Command-Line%20Interface-%28CLI%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="01-Command-Line%20Interface-%28CLI%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="01-Command-Line%20Interface-%28CLI%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="01-Command-Line%20Interface-%28CLI%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="01-Command-Line%20Interface-%28CLI%29.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">02 IDEs</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">03 Compilation (Makefile)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="03-Compilation-%28Makefile%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="03-Compilation-%28Makefile%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="03-Compilation-%28Makefile%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="03-Compilation-%28Makefile%29.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">04 Debuggers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="04-Debuggers.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="04-Debuggers.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="04-Debuggers.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="04-Debuggers.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="04-Debuggers.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="04-Debuggers.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="04-Debuggers.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">05 Version Control (git)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="05-Version-Control-%28git%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="05-Version-Control-%28git%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="05-Version-Control-%28git%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="05-Version-Control-%28git%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="05-Version-Control-%28git%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="05-Version-Control-%28git%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="05-Version-Control-%28git%29.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">06 Text Editors (emacs)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="06-Text-Editors-%28emacs%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="06-Text-Editors-%28emacs%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="06-Text-Editors-%28emacs%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="06-Text-Editors-%28emacs%29.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">07 Call Stack Procedural Abstraction and Unit Tests</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Overview</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#71-machine-model">7.1 Machine Model 机器模型</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#711-storage-duration">7.1.1 Storage Duration</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#712-reference-sematics-and-value-sematics">7.1.2 Reference sematics and Value sematics 引用语义与值语义</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#713-compile-time-runtime">7.1.3 Compile time 和 Runtime</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#72-function-calls-and-the-call-stack">7.2 Function Calls and the Call Stack</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#721-activation-record-and-stack">7.2.1 Activation Record and stack 激活记录与栈</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#722-function-call">7.2.2 Function Call 的过程</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#723-activation-record-stack-frame">7.2.3 Activation Record (Stack Frame) 的运行例</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#724-pass-by-reference-function-stack-frame">7.2.4 pass-by-reference function 的 stack frame 运行例</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#73-procedural-abstraction">7.3 Procedural Abstraction 过程抽象化</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#731-interfaces-implementations">7.3.1 Interfaces 和 implementations</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#74-unit-testing">7.4 Unit Testing</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#741-testing">7.4.1 Testing 的类型</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#742-test-cases">7.4.2 Test Cases 的类型</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#743-unit-test-framework">7.4.3 Unit-Test Framework 教程</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#744-framework-macro-assert">7.4.4 Framework macro提供的特殊 Assert 函数</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Overview</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#71-machine-model">7.1 Machine Model 机器模型</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#711-storage-duration">7.1.1 Storage Duration</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#712-reference-sematics-and-value-sematics">7.1.2 Reference sematics and Value sematics 引用语义与值语义</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#713-compile-time-runtime">7.1.3 Compile time 和 Runtime</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#72-function-calls-and-the-call-stack">7.2 Function Calls and the Call Stack</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#721-activation-record-and-stack">7.2.1 Activation Record and stack 激活记录与栈</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#722-function-call">7.2.2 Function Call 的过程</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#723-activation-record-stack-frame">7.2.3 Activation Record (Stack Frame) 的运行例</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#724-pass-by-reference-function-stack-frame">7.2.4 pass-by-reference function 的 stack frame 运行例</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#73-procedural-abstraction">7.3 Procedural Abstraction 过程抽象化</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#731-interfaces-implementations">7.3.1 Interfaces 和 implementations</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#74-unit-testing">7.4 Unit Testing</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#741-testing">7.4.1 Testing 的类型</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#742-test-cases">7.4.2 Test Cases 的类型</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#743-unit-test-framework">7.4.3 Unit-Test Framework 教程</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#744-framework-macro-assert">7.4.4 Framework macro提供的特殊 Assert 函数</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Overview</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#71-machine-model">7.1 Machine Model 机器模型</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#711-storage-duration">7.1.1 Storage Duration</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#712-reference-sematics-and-value-sematics">7.1.2 Reference sematics and Value sematics 引用语义与值语义</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#713-compile-time-runtime">7.1.3 Compile time 和 Runtime</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#72-function-calls-and-the-call-stack">7.2 Function Calls and the Call Stack</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#721-activation-record-and-stack">7.2.1 Activation Record and stack 激活记录与栈</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#722-function-call">7.2.2 Function Call 的过程</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#723-activation-record-stack-frame">7.2.3 Activation Record (Stack Frame) 的运行例</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#724-pass-by-reference-function-stack-frame">7.2.4 pass-by-reference function 的 stack frame 运行例</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#73-procedural-abstraction">7.3 Procedural Abstraction 过程抽象化</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#731-interfaces-implementations">7.3.1 Interfaces 和 implementations</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#74-unit-testing">7.4 Unit Testing</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#741-testing">7.4.1 Testing 的类型</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#742-test-cases">7.4.2 Test Cases 的类型</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#743-unit-test-framework">7.4.3 Unit-Test Framework 教程</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#744-framework-macro-assert">7.4.4 Framework macro提供的特殊 Assert 函数</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Overview</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#71-machine-model">7.1 Machine Model 机器模型</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#711-storage-duration">7.1.1 Storage Duration</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#712-reference-sematics-and-value-sematics">7.1.2 Reference sematics and Value sematics 引用语义与值语义</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#713-compile-time-runtime">7.1.3 Compile time 和 Runtime</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#72-function-calls-and-the-call-stack">7.2 Function Calls and the Call Stack</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#721-activation-record-and-stack">7.2.1 Activation Record and stack 激活记录与栈</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#722-function-call">7.2.2 Function Call 的过程</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#723-activation-record-stack-frame">7.2.3 Activation Record (Stack Frame) 的运行例</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#724-pass-by-reference-function-stack-frame">7.2.4 pass-by-reference function 的 stack frame 运行例</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#73-procedural-abstraction">7.3 Procedural Abstraction 过程抽象化</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#731-interfaces-implementations">7.3.1 Interfaces 和 implementations</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#74-unit-testing">7.4 Unit Testing</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#741-testing">7.4.1 Testing 的类型</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#742-test-cases">7.4.2 Test Cases 的类型</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#743-unit-test-framework">7.4.3 Unit-Test Framework 教程</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#744-framework-macro-assert">7.4.4 Framework macro提供的特殊 Assert 函数</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Overview</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#71-machine-model">7.1 Machine Model 机器模型</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#711-storage-duration">7.1.1 Storage Duration</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#712-reference-sematics-and-value-sematics">7.1.2 Reference sematics and Value sematics 引用语义与值语义</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#713-compile-time-runtime">7.1.3 Compile time 和 Runtime</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#72-function-calls-and-the-call-stack">7.2 Function Calls and the Call Stack</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#721-activation-record-and-stack">7.2.1 Activation Record and stack 激活记录与栈</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#722-function-call">7.2.2 Function Call 的过程</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#723-activation-record-stack-frame">7.2.3 Activation Record (Stack Frame) 的运行例</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#724-pass-by-reference-function-stack-frame">7.2.4 pass-by-reference function 的 stack frame 运行例</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#73-procedural-abstraction">7.3 Procedural Abstraction 过程抽象化</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#731-interfaces-implementations">7.3.1 Interfaces 和 implementations</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#74-unit-testing">7.4 Unit Testing</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#741-testing">7.4.1 Testing 的类型</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#742-test-cases">7.4.2 Test Cases 的类型</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#743-unit-test-framework">7.4.3 Unit-Test Framework 教程</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#744-framework-macro-assert">7.4.4 Framework macro提供的特殊 Assert 函数</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">08 Pointers and Arrays</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="08-Pointers-and-Arrays.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="08-Pointers-and-Arrays.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="08-Pointers-and-Arrays.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="08-Pointers-and-Arrays.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">09 const keyword</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="09-const-keyword.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="09-const-keyword.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">10 Compound objects, ADT and Dynamic Allocation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="10-Compound-objects%2C-ADT-and-Dynamic-Allocation.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="10-Compound-objects%2C-ADT-and-Dynamic-Allocation.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="10-Compound-objects%2C-ADT-and-Dynamic-Allocation.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">11 C strings</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="11-C-strings.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="11-C-strings.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="11-C-strings.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="11-C-strings.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="11-C-strings.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="11-C-strings.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">12 Stream and IO</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="12-Stream-and-IO.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="12-Stream-and-IO.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="12-Stream-and-IO.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="12-Stream-and-IO.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="12-Stream-and-IO.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="12-Stream-and-IO.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">13 ADT in C++</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="13-ADT-in-C%2B%2B.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="13-ADT-in-C%2B%2B.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="13-ADT-in-C%2B%2B.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="13-ADT-in-C%2B%2B.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="13-ADT-in-C%2B%2B.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">14 Derived Classes and Inheritance</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="14-Derived-Classes-and-Inheritance.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="14-Derived-Classes-and-Inheritance.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="14-Derived-Classes-and-Inheritance.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="14-Derived-Classes-and-Inheritance.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="14-Derived-Classes-and-Inheritance.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">15 Polymorphism</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="15-Polymorphism.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="15-Polymorphism.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="15-Polymorphism.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="15-Polymorphism.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="15-Polymorphism.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">16 ContainerADT I</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="16-ContainerADT-I.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="16-ContainerADT-I.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="16-ContainerADT-I.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="16-ContainerADT-I.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="16-ContainerADT-I.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">17 ContainerADT II</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="17-ContainerADT-II.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="17-ContainerADT-II.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="17-ContainerADT-II.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="17-ContainerADT-II.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="17-ContainerADT-II.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">18 Memory Model and Dynamic Memory</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="18-Memory-Model-and-Dynamic-Memory.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="18-Memory-Model-and-Dynamic-Memory.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="18-Memory-Model-and-Dynamic-Memory.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="18-Memory-Model-and-Dynamic-Memory.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="18-Memory-Model-and-Dynamic-Memory.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">19 Managing Dynamic Memory</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="19-Managing-Dynamic-Memory.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="19-Managing-Dynamic-Memory.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="19-Managing-Dynamic-Memory.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="19-Managing-Dynamic-Memory.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">20 Deep Copies and the Big Three</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="20-Deep-Copies-and-the-Big-Three.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="20-Deep-Copies-and-the-Big-Three.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="20-Deep-Copies-and-the-Big-Three.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="20-Deep-Copies-and-the-Big-Three.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">21 Linked List</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="21-Linked-List.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="21-Linked-List.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="21-Linked-List.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="21-Linked-List.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">22 Iterator</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="22-Iterator.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="22-Iterator.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="22-Iterator.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="22-Iterator.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">23 Functors and Imposter Syndrome</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="23-Functors-and-Imposter-Syndrome.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="23-Functors-and-Imposter-Syndrome.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="23-Functors-and-Imposter-Syndrome.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="23-Functors-and-Imposter-Syndrome.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">24 Recursion</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="24-Recursion.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="24-Recursion.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="24-Recursion.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="24-Recursion.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">25 BST and Maps</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="25-BST-and-Maps.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="25-BST-and-Maps.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="25-BST-and-Maps.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="25-BST-and-Maps.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="25-BST-and-Maps.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">280 midterm cheatsheet</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="280-midterm-cheatsheet.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="280-midterm-cheatsheet.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="280-midterm-cheatsheet.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="280-midterm-cheatsheet.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="280-midterm-cheatsheet.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="280-midterm-cheatsheet.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="280-midterm-cheatsheet.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="280-midterm-cheatsheet.html">Overview</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">umich-eecs280-lec-notes-ch</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html" class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">07 Call Stack Procedural Abstraction and Unit Tests</li>
      <li class="breadcrumb-item active">Overview</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="toc">
<ul>
<li><a href="#7-foundations">7 Foundations</a><ul>
<li><a href="#71-machine-model">7.1 Machine Model 机器模型</a><ul>
<li><a href="#711-storage-duration">7.1.1 Storage Duration</a></li>
<li><a href="#712-reference-sematics-and-value-sematics">7.1.2 Reference sematics and Value sematics 引用语义与值语义</a></li>
<li><a href="#713-compile-time-runtime">7.1.3 Compile time 和 Runtime</a></li>
</ul>
</li>
<li><a href="#72-function-calls-and-the-call-stack">7.2 Function Calls and the Call Stack</a><ul>
<li><a href="#721-activation-record-and-stack">7.2.1 Activation Record and stack 激活记录与栈</a></li>
<li><a href="#722-function-call">7.2.2 Function Call 的过程</a></li>
<li><a href="#723-activation-record-stack-frame">7.2.3 Activation Record (Stack Frame) 的运行例</a></li>
<li><a href="#724-pass-by-reference-function-stack-frame">7.2.4 pass-by-reference function 的 stack frame 运行例</a></li>
</ul>
</li>
<li><a href="#73-procedural-abstraction">7.3 Procedural Abstraction 过程抽象化</a><ul>
<li><a href="#731-interfaces-implementations">7.3.1 Interfaces 和 implementations</a></li>
</ul>
</li>
<li><a href="#74-unit-testing">7.4 Unit Testing</a><ul>
<li><a href="#741-testing">7.4.1 Testing 的类型</a></li>
<li><a href="#742-test-cases">7.4.2 Test Cases 的类型</a></li>
<li><a href="#743-unit-test-framework">7.4.3 Unit-Test Framework 教程</a></li>
<li><a href="#744-framework-macro-assert">7.4.4 Framework macro提供的特殊 Assert 函数</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1 id="7-foundations">7 Foundations</h1>
<p>这一讲是 recap 以前学过的内容并介绍一些更加 rigorous 的概念.</p>
<h2 id="71-machine-model">7.1 Machine Model 机器模型</h2>
<p>一个 <strong>name(名称)</strong> 指 some entity such as a variable, function, or type.</p>
<p>一个 <strong>varibale(变量)</strong> 是一个指代 memory 中的一个 object 的 name. <strong>(variable 就是一种 name！)</strong></p>
<p>一个 name 具有它的 <strong>scope(作用域)</strong>，scope 决定了什么区域的 code 能够使用该 name 来指代它表示的 entity.</p>
<p>一个 <strong>declaration(声明)</strong> 就是引入一个 name 的行为，并且 declaration 处是该 name 的 scope 的起点.</p>
<p>一个 <strong>object(对象)</strong> 就是 memory 中的 a piece of data.</p>
<p>object is locateda at some <strong>address(地址)</strong> in the memory. </p>
<p>object 的 <strong>lifetime(生命周期)</strong> 就是 legal to use this object 的时期. 一个 object 在某个时刻被 create，在某个时刻被 destroy，从被 create 到被 destroy 的这段时间就是我们能够 legallu use it 的时间.  它取决于该 object 的 <strong>storage duration</strong>.</p>
<p>为了学习 memory 中 objects 和用来指代它们的 variables 的变化，我们引入 <strong>machine model</strong>. </p>
<p><strong>Machine Model 就是对于 codes 如何 relate to program execution 的一个描述.</strong></p>
<p>最基础的 machine model 就是把 memory 看做一个像 array 的东西的图. 如下. 之后会有更复杂的 machine model</p>
<p><img src="Assets/Screenshot 2024-01-17 at 18.10.53.png" alt="Screenshot 2024-01-17 at 18.10.53" style="zoom:80%;" /></p>
<p>现在我们开始讲 object 的储存周期.</p>
<h3 id="711-storage-duration">7.1.1 Storage Duration</h3>
<p>有三种 Storage Duration.</p>
<ol>
<li><strong>static (也叫 Global 全局对象)</strong>: 这种 object 的 lifetime 是 the whole program.</li>
<li><strong>automatic (也叫 Local 局部对象)</strong>: 这种 object 的 lifetime 是被绑定于一个特定的 scope，比如某一段代码块.</li>
<li><strong>dynamic (动态)</strong>: static 和 automatic durations 都是由 compiler 控制的，而 dynamic duration 却是由 programmer explicitly create and control 的. </li>
</ol>
<p>本课程将只讲 static 和 automatic 的 object. </p>
<p>Variable  和 memory object 并不等同. Variable 是和 source code 相挂钩的概念，而 memory object 则是和 runtime 相挂钩的概念. <strong>同一个 variable 可以在不同时间指代不同的 object.</strong> 比如 a local variable in a functon that is called more than once. <strong>Dynamic storage duration 的 objects 不会和 一个 variable 关联</strong>.</p>
<h3 id="712-reference-sematics-and-value-sematics">7.1.2 Reference sematics and Value sematics 引用语义与值语义</h3>
<p>我们都已经学过了 pass by reference 和 pass by value 的区别. 而我们知道，C++ 中 <code>x = y</code> 仅表示 modify the value of object <code>x</code> 而不是 change which object <code>x</code> is referring to，</p>
<p>如果一个行为中 <code>x = y</code> 表示前者，那么这个地方就叫做 <strong>value semantics(值语义)</strong>；而如果表示后者，那么就叫做<strong>reference semantics(引用语义)</strong>. 因而 C++ 这个语言的默认是 value sematics.</p>
<p>而 <strong>C++ 仅在 intializating new variable 的时候支持 reference semantics</strong>.</p>
<pre><code class="language-c++">int x = 42; // initial x to refer to an object, and sets the initial value to 42.
int y = 99;
y = x; // assign the value of x:42 to y.
x = 55; // y is not becoming 55, because they are still pointing at different objects.
</code></pre>
<p><img src="Assets\image-20231225011608180.png" alt="image-20231225011608180"  /></p>
<p>但是如果在 <strong>new variable name</strong> 的左侧加上一个 <strong>ampersand (&amp;)</strong>, 那么就能够把该 name 关联到一个现有的 object. </p>
<p><strong>我们都知道，这个符号叫做 reference operator（取地址运算符），放在一个代表某个 object 的 variable name 左侧，可以提取它所代表的 object 的 memory address 来存放在指针变量里；但是在 initialization 的时候如果在新 varible name 的左侧加上 &amp;，则并不是表示提取 address 的运算，而是 “将我们左边这个新的 varibale name关联到现有的右边这个 variable name 代表的 object 上”，通俗而言就是给对象取个新名字</strong>. 这就是 reference operator 的另一个用法. 这个用法和写函数时 pass by reference 的用法是一样的，即直接指向这块 address 上的 object 对其进行赋名/运算. </p>
<pre><code class="language-c++">int x = 42;
int &amp;y = x;
//y和x是同一个object, 值都是42, y是给它起的新名字
x = 24;
cout &lt;&lt; y; //24, 值被改变了
z = 3;
y = z; //pass by value
cout &lt;&lt; x; //3, 值被改变了
</code></pre>
<p>这里，y 和 x 是两个 variable，但是他们都和同一个 object associate了. 因而改变其中任何一个的值，另一个也会改变，不如说 y 和 x 是称呼该 object 的两个名字. </p>
<p><img src="Assets/Screenshot 2024-01-15 at 18.47.19.png" alt="Screenshot 2024-01-15 at 18.47.19" style="zoom:67%;" /></p>
<p>并且<strong>由于C++只支持在 initialization 时的 reference semantics, a variable 和 a memory object 之间的 association can never be broken! (except when variable goes out of scope).</strong> 也就是说你一旦 declare 了一个 variable，那么它就和你 declare 时让它 refer 的 object 绑定了，<strong>你无法重新给这个 variable 绑定新的 object！</strong>你修改它就是修改这个 object. </p>
<p>而对于当出了 scope 之后，这个 name 就无效了，我们的 object 就少了一个名字. 比如一个函数的 pass by reference 的参数，就是对一个变量取的一个新名字，而在 <code>main()</code> 函数运行过了这个函数之后，这个名字就失去了. 因而 <strong>pass-by-reference parameters 也叫做原 object 的一个 alias (别名)，可以理解为我们在 Windows 桌面创建的快捷方式.</strong></p>
<h3 id="713-compile-time-runtime">7.1.3 Compile time 和 Runtime</h3>
<p>一个程序首先要 compile，其次再 execute (run). </p>
<p>Compile 一个程序是需要时间的. 这段时间里 compiler 会做一下的事情: </p>
<ol>
<li>
<p>observe variable declarations: 观察代码里 variables 的 name, type, scope 和 value. </p>
</li>
<li>
<p>确定需要给每个 type 的 variables 的 size.</p>
</li>
</ol>
<p>比如：</p>
<p><strong>int 需要 4 bytes</strong></p>
<p><strong>double 需要 8 bytes</strong></p>
<p>更复杂的 ADT: n bytes</p>
<p>(<strong>注意：一个 byte 就是 8 个 bits，一个 bit 实际上就是 binary digits，就是一个 0/1 的二进制数</strong>)</p>
<p><strong>Compile time</strong> 就是 Compiler compile 你的 codes 的这段时间. </p>
<p>早在 compile time，compiler 就会决定好这段代码<strong>需要多大的 memory.</strong> </p>
<p>而 <strong>runtime</strong> 就是程序运行的时间. 这段时间 compiled code 被执行，variables 会以 objects 的形式被储存在 memory (RAM) 里，其大小就是这个 variable type 的大小.</p>
<p>（当然 variable 自身也会占据一定大小，就比如两个 int variable 都是同一个 object 的名字，那么这个 object 就只有 4 bytes，但是其实这两个名字也占据了一点 memory 使得它们能被识别。但这种东西我们就不管了。） </p>
<p>所以我们要注意的概念是：<strong>object 只在 runtime 产生，variable 是 compile time 就被识别了</strong>。</p>
<h2 id="72-function-calls-and-the-call-stack">7.2 Function Calls and the Call Stack</h2>
<h3 id="721-activation-record-and-stack">7.2.1 Activation Record and stack 激活记录与栈</h3>
<p>刚才我们介绍了最基本的把 memory 中的 object 看作类似 array 元素的 machine model，而现在我们介绍一个更加 structured 的 machine model，即被多种高级语言的 implementations 使用的：<strong>Stack-based memory management （基于栈的内存管理）.</strong></p>
<p>在大多数高级语言的 implementations 中，函数调用的数据都集中存储在一个 <strong>activation record（激活记录）</strong>中，<strong>activation record 就是给函数分配的 memory，分配给一个函数的 memory 就叫做 它的activation record</strong> 其中包含函数的所有 parameters 和 local variables，temporary objects 即 return address等，而本课程中我们只考虑 activation record 中的 parameters 和 local variables，忽略其他数据.</p>
<p>在 stack-based memory management 中，activation record 被储存在一个叫做 <strong>stack（栈）</strong>的 data structure 中. 当创建一条 activation record 后，它就会被放在 <strong>stack 的顶部</strong>，而<strong>第一个被销毁的 activation record 就是这条最新被创建出来的 activation record</strong>.  这就是著名的 <strong>last-in, first-out Behavior (LIFO，后进先出行为)</strong>. </p>
<p>由于 activation record (more commonly)也叫做 <strong>stack frame（栈帧）</strong>.</p>
<p>所以知道了 activation record 的概念后，我们就大概知道高级语言程序的一些粗略的数据存储方式了. 比如我们的 C++ 程序总是从 <code>main()</code> 函数开始的，而所有在 <code>main()</code> 函数中的 local objects 都存在 <code>main()</code> 的 activation record 中，而 <code>main()</code> 又调用其他函数，运行时在栈顶为这些函数创造 activation record，而创造的<strong>这个 activation record 的大小取决于它可能存储的局部变量数量. 就是说，这个 activation 的大小并不是自由改变的，而是从它被创建时就固定好的，根据里面的 local variable 数量决定（我们可能会觉得是 object 数量，但是并不是，而是 local variable 的数量，因为我们的理解基于简化模型，实际上作为 reference 的 variable 也占 memory，但是是 user 不能接触的.）</strong></p>
<h3 id="722-function-call">7.2.2 Function Call 的过程</h3>
<p>我们知道，C++ 的程序就是运行函数. 最开始的函数就是 <code>main()</code>；<code>main()</code> 会 call 其他函数，而其他函数又会 call 其他函数；运行完 <code>main()</code>，程序就结束了.</p>
<p>每一个 function call 的流程按照下面这个过程：</p>
<ol>
<li>
<p>当 function 运行到嵌套在里面的其他 function 时，evaluate actual <strong>arguments</strong> to the function.</p>
</li>
<li>
<p>Make a new and unique invocation of the called function.</p>
</li>
</ol>
<p>(1) Push a stack frame
  (2) Pass parameters</p>
<ol>
<li>
<p>暂停 original function 的运行</p>
</li>
<li>
<p>运行 called function，可能会返回一些值 (optional)</p>
</li>
<li>
<p>运行 called function 结束后，重新在 original function left off 的地方 resume.</p>
</li>
<li>
<p>destroy called function 的 stack frame.</p>
</li>
</ol>
<p>注意，这里从 3 到 4 的过渡被称为一种 <strong>active flow</strong>，因为这个过程是 code explictly 告诉 computer 去运行哪个 function，而从第 4 步到第 5 步的过渡被称为一种 <strong>passive flow</strong>，因为这个过程的 transfer of control 并不是 code 告诉 computer, 而是 computer 在运行 stack frame 的过程中自主的.</p>
<h3 id="723-activation-record-stack-frame">7.2.3 Activation Record (Stack Frame) 的运行例</h3>
<p>为了理解程序运行的流程，我们考虑这一个完整的程序作为第一个例子：</p>
<pre><code class="language-c++">void bar(){
}

void foo(){
    bar();
}

int main(){
    foo();
}
</code></pre>
<p>这一程序都看得出来，是 <code>main()</code> 函数调用 <code>foo()</code> 这个函数，而 <code>foo()</code> 这个函数内部再调用 <code>bar()</code> 这个函数.</p>
<p>这个过程在 stack 中的样子是这样的：（不论哪个方向都一样的）</p>
<p><img src="Assets/Screenshot 2024-01-19 at 00.18.45.png" alt="Screenshot 2024-01-19 at 00.18.45" style="zoom:67%;" /></p>
<ol>
<li>program 一开始就会调用 <code>main()</code> 函数，因而创建一条 <code>main()</code> 函数的 activation record 并放入栈顶；</li>
<li>而后 <code>main()</code> 函数调用 <code>foo()</code> 函数，因而创造一条 <code>foo()</code> 函数的 activation record 并入栈，放在栈顶，<code>main()</code> 函数的上面；</li>
<li>而后 <code>foo()</code> 函数调用 <code>bar()</code> 函数，同样创造 activation record 并入栈顶.</li>
<li>最里层的 <code>bar()</code> 函数运行结束，从栈顶先移除它的 activation record；</li>
<li>而后 <code>foo()</code> 函数运行完成，从栈顶移除 activation record；</li>
<li><code>main()</code> 函数运行结束，栈被清空. </li>
</ol>
<p>这是一个比较简单的过程，现在我们加入 variables 来进一步理解，看第二个稍微复杂一些的例子.</p>
<pre><code class="language-c++">int plus_one(int x){
    return x + 1;
}
int plus_two(int x){ 
    return plus_one(x + 1);
}
int main(){
    int result = 0;
    result = plus_one(0); 
    result = plus_two(result); 
    cout &lt;&lt; result;
}
</code></pre>
<p>program 首先调用 <code>main()</code> 函数，并先声明一个 local variable <code>result</code>（对应的 object 同时被创造，就是我们刚才说的仅在 variable 的 initialization 时的 reference semantics）；而后<code>main()</code> 函数调用 <code>plus_one()</code> 函数，<code>plus_one()</code> 生成其 scope 下的 local variable <code>x</code>，将调用这个函数的 <code>main()</code> 函数中的 local variable <code>result</code> 的值 pass 给自己的 local variable <code>x</code>；而后 <code>plus_one()</code> 运行结束返回 <code>x</code> 的值加上 1 并 assign 给 <code>result</code> ，<code>result</code> 的值更新；而后 <code>main()</code> 函数又运行下一个函数 <code>plus_two()</code>. </p>
<p>而这一过程在 stack 中是这样的一个流程：</p>
<p><img src="Assets/Screenshot 2024-01-19 at 09.45.48.png" alt="Screenshot 2024-01-19 at 09.45.48" style="zoom: 50%;" /></p>
<p><img src="Assets/Screenshot 2024-01-19 at 09.48.07.png" alt="Screenshot 2024-01-19 at 09.48.07" style="zoom:50%;" /></p>
<ol>
<li><code>main()</code> 函数被调用，<code>main()</code> 的 activation record 被创建.</li>
<li><code>main()</code> 函数的执行过程中 local variable <code>result</code> 被声明，留出 memory 中的位置存放对应的 object，具体数据为 int 型的 1.</li>
<li><code>plus_one()</code> 函数被 <code>main()</code> 函数调用，创建 <code>plus_one()</code> 的 activation record.  在被调用的同时，<code>plus_one()</code> 函数生成在它的 scope 中的 local variable <code>x</code>，并通过函数的 pass by value，获取调用它的 <code>main()</code> 函数里的 local variable <code>result</code> 的值，并 pass 给自己的 local variable <code>x</code>.</li>
<li><code>plus_one()</code> 对自己的 local variable <code>x</code> 进行加一的操作，运行结束时把它的值作为函数的 return value，return 给调用自己的 <code>main()</code> 函数. <code>main()</code> 函数获取 <code>plus_one()</code> 的 return 值的同时，把它 assign 给 <code>main()</code> 的 local variable <code>result</code>. </li>
<li>在完成 return 的过程后，<code>plus_one()</code> 运行结束并清除自己的 activation record，即出 stack. 现在 stack 中只剩下在栈底的 <code>main()</code> 函数的 activation record.</li>
</ol>
<p>这就是从 program 开始运行一直到 <code>result = plus_one(0);</code> 这一行运行结束的全过程. 现在来到下一行 <code>result = plus_two(result);</code>. 从刚才的状态开始.</p>
<ol>
<li><code>main()</code> 调用 <code>plus_two()</code> 函数，<code>plus_two()</code> 的 activation record 被创建. <strong>注意到，<code>plus_two()</code> 的 activation record 在 memory 中的位置会被安排到刚才被清除的 <code>plus_one()</code> 的 activation record 的位置上！</strong><code>plus_two()</code> 在创建 activation record 的同时也一样从 <code>main()</code> 中获取 <code>result</code> 的值并赋给自己初始的 local variable <code>x</code>.</li>
<li><code>plus_two()</code> 调用 <code>plus_one()</code> 函数，创建 activation record，传参，把自己的local variable <code>x</code> 传给 <code>plus_one</code> 的 local variable <code>x</code>. 这里注意的是，我们可以发现<strong>这两个函数的变量名都叫做 <code>x</code>，但是这并不会冲突，因为它们储存在不同的 activation record 中. 在 <code>plus_one</code> 的 scope 中 <code>x</code> 指代 <code>plus_one</code> 中的 object，而在 <code>plus_two</code> 的 scope 中指代 <code>plus_two</code> 中的 object. 所以程序识别 local variable name 其实是以一个 activaion record 为单位的，因由 scope 决定！多个 activation record 同时存在时，里面可以有相同的局部变量名，这也就是我们之前说的一个 variable name 绑定了一个 object 就不能绑定其他 object了，除非出 scope. 当然我们自然而然地想到 global variable 肯定不能这样.</strong></li>
<li>之后各函数依次运行结束并清除 activation record 出栈.</li>
</ol>
<h3 id="724-pass-by-reference-function-stack-frame">7.2.4 pass-by-reference function 的 stack frame 运行例</h3>
<p>上面都是只有 pass by value 的 parameter 的函数，现在看第三个例子：一个有 pass by reference 的 parameter 的函数.</p>
<p>Pass-by-reference 就是在创建初始 variable 时用了 reference semantics. 实际上，**函数中传参就是用等号赋值！只不过这一步可以跨域 activation record 到调用本函数的另一个函数的 activation record 中去. 比如 <code>void swap(int &amp;x, int &amp;y);</code> 而我们在 <code>main()</code> 函数里 call 它，<code>swap(x,y);</code>. 这就是等于 <code>int &amp;x = x;</code>, <code>int &amp;y = y</code>, 由于是跨 scope 的所以这里同一个 variable <code>x</code> 可以指代两个不同的 object，完成这个赋值行为. **</p>
<p>按照我们之前学习的， <code>int &amp;a = b</code> 就是给 <code>b</code> 指代的 object 取另一个名字叫做 <code>a</code>，因而 pass-by-reference 的 local variable 就是给调用自己的函数传过来的它的作为参数的 local variable 所指代的 object 取的一个新名字. 这一个传参过程是跨 activation record 的. 我们看下面这个例子.</p>
<pre><code class="language-c++">void swap(int &amp;x, int &amp;y){ 
    int tmp = x;
    x = y;
    y = tmp;
}

int main(){
    int a = 3;
    int b = 7;
    cout &lt;&lt; a &lt;&lt; &quot;,&quot; &lt;&lt; b &lt;&lt; endl; //3,7 
  swap(a, b);
    cout &lt;&lt; a &lt;&lt; &quot;,&quot; &lt;&lt; b &lt;&lt; endl; //7,3 
}
</code></pre>
<p>我们来综合刚才对 <code>&amp;</code> 的学习以及对 call stack 的学习来看这一流程：</p>
<p><img src="Assets/Screenshot 2024-01-19 at 10.57.01.png" alt="Screenshot 2024-01-19 at 10.57.01" style="zoom: 50%;" /></p>
<ol>
<li>程序创建 <code>main()</code> 函数的 activation record，大小包含两个 local variable的 space. <code>main()</code> 函数运行.</li>
<li>运行到 <code>swap()</code> 时为其创建 activation record，大小包含三个 local variable，其中两个是 <code>main()</code> 的 local variable <code>a</code> 和 <code>b</code> 的 reference，另外一个 <code>tmp</code> refer to 自己的一个 temporary object.</li>
<li><code>swap()</code> 进行我们熟悉的变量交换操作. 这里 <code>x</code> 和 <code>y</code> 都是引用参数，但我们要记得我们说的：reference semantics 仅在 initialization 时，而这里是 value semantics. 这里的 <code>x = y</code> 把 <code>y</code> (<code>b</code>) 所指代的 object 的值赋给 <code>x</code> (<code>a</code>) 所指代的 object. 自然地，这一过程在两个 activation record 中是同步进行的，因为动的是同两个 object.</li>
<li>结束清除 activation record 而出栈.</li>
</ol>
<h2 id="73-procedural-abstraction">7.3 Procedural Abstraction 过程抽象化</h2>
<p><img src="Assets\image-20240127140640272.png" alt="image-20240127140640272" style="zoom:67%;" /></p>
<p>procedural adstraction 把 what code does 和 how it works 给分开了. <strong>Functions 就是 C++ 中过程抽象化的主要工具.</strong></p>
<h3 id="731-interfaces-implementations">7.3.1 Interfaces 和 implementations</h3>
<p>CS terminology 中，<strong>interface</strong> 指用来 specify what something does 的东西，而 <strong>implementation</strong> specifes how it works.</p>
<pre><code class="language-c++">#include &lt;iostream&gt;
#include &lt;vector&gt;
using namespace std;
double mean(vector&lt;double&gt; v) //interface
{
    // implementations
}
int main() {
    vector&lt;double&gt; v;
    double m = mean(v); // only care about the interface here
    cout &lt;&lt; m;
}
</code></pre>
<p><img src="Assets\image-20240127141603100.png" alt="image-20240127141603100"  /></p>
<h2 id="74-unit-testing">7.4 Unit Testing</h2>
<h3 id="741-testing">7.4.1 Testing 的类型</h3>
<p>Testing 有以下几个类型</p>
<ol>
<li>Unit testing: One piece at a time (e.g., a function)
   它的好处是</li>
</ol>
<p>(1) Find and fix bugs early
   (2) Test smaller, less complex, easier to understand units.</p>
<ol>
<li>System Testing: Test Entire project (code base)</li>
</ol>
<p>我们在 unit testing 之后应该进行 system testing 来确保代码的衔接正确</p>
<ol>
<li>Regression testing: 在更改代码之后，Automatically run all unit and system tests.</li>
</ol>
<p>这一节课提供了 <code>unit_test_framework.hpp</code>, 其中定义了一个 <strong>macro(宏)</strong> 来方便写 Unit Tests. 因而写 project 只需要把这个文件 include 进 testing 的 cpp 文件就可以了</p>
<pre><code class="language-c++">#include &quot;unit_test_framework.hpp&quot;
</code></pre>
<h3 id="742-test-cases">7.4.2 Test Cases 的类型</h3>
<ol>
<li>Type prehibited: 类型不一致可能会导致 compiler error 的 Testing，<strong>不需要写.</strong></li>
<li>Requires prohibited: 违反 requirements 的 tests. <strong>不需要写.</strong></li>
<li>Simple: 一般的 test cases.</li>
<li>Edge (Special): 一些边缘问题，比如只有一个元素的 array 和 vector，测试众数的时候设置多个众数(应当取最小的)等.</li>
<li>Stress: 大型的数据，如几万个元素的vector. <strong>这节课不需要写.</strong></li>
</ol>
<h3 id="743-unit-test-framework">7.4.3 Unit-Test Framework 教程</h3>
<p>比如测试一个叫做 <code>arrays.cpp</code> 的文件，我们应该新建一个文件叫 <code>arrays_tests.cpp</code>. 在其中引用 framework.</p>
<p>如果其中包括两个叫做 <code>slideRight()</code> 的函数和 <code>flip()</code> 的函数，那么就在 <code>arrays_tests.cpp</code> 中写一些叫做 <code>TEST(test_slide_right_123)</code> 和 <code>`TEST(test_flip_123)</code> 这样的函数.</p>
<pre><code class="language-c++">#include &quot;arrays.hpp&quot;
#include &quot;unit_test_framework.hpp&quot;

// A helper function for comparing arrays. Returns true if the
// arrays are the same size and contain the same values.
bool compare_arrays(int arr1[], int size1, int arr2[], int size2) {
  if (size1 != size2) {
    return false;
  }

  for (int i = 0; i &lt; size1; ++i) {
    if (arr1[i] != arr2[i]) {
      return false;
    }
  }

  return true;
}

// We define a test case with the TEST(&lt;test_name&gt;) macro.
// &lt;test_name&gt; can be any valid C++ function name.
TEST(test_slide_right_1) {
  int testing[] = { 4, 0, 1, 3, 3 };
  int correct[] = { 3, 4, 0, 1, 3 };
  slideRight(testing, 5);
  ASSERT_TRUE(compare_arrays(testing, 5, correct, 5));
}

TEST(test_flip_1) {
  int testing[] = { 4, 0, 1, 3, 3 };
  int correct[] = { 3, 3, 1, 0, 4 };
  flip(testing, 5);
  ASSERT_TRUE(compare_arrays(testing, 5, correct, 5));
}

TEST_MAIN() // No semicolon! 这就是宏中定义的语法
</code></pre>
<p>在写完之后，用编译器制作出 .exe 文件</p>
<pre><code class="language-shell">g++ -Wall -Werror -pedantic -g -std=c++11 arrays.cpp arrays_tests.cpp -o arrays_tests.exe

./arrays_tests.exe

# Running test: numbers_are_equal
# PASS
# Running test: true_is_true
# PASS

# *** Results ***
# ** Test case 'numbers_are_equal': PASS
# ** Test case 'true_is_true': PASS
# *** Summary ***
# Out of 2 tests run:
# 0 failure(s), 0 error(s)
</code></pre>
<p>这个 framework macro 最大的特点是：还可以用制作出来的 .exe 只跑其中的一个函数.</p>
<pre><code class="language-shell">./arrays_tests.exe numbers_are_equal
# Running test: numbers_are_equal
# PASS

# *** Results ***
# ** Test case 'numbers_are_equal': PASS
# *** Summary ***
# Out of 1 tests run:
# 0 failure(s), 0 error(s)
</code></pre>
<h3 id="744-framework-macro-assert">7.4.4 Framework macro提供的特殊 Assert 函数</h3>
<table>
<thead>
<tr>
<th>Assertion</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ASSERT_EQUAL(first, second)</code></td>
<td>相等</td>
</tr>
<tr>
<td><code>ASSERT_NOT_EQUAL(first, second)</code></td>
<td>不等</td>
</tr>
<tr>
<td><code>ASSERT_TRUE(bool value)</code></td>
<td>true</td>
</tr>
<tr>
<td><code>ASSERT_FALSE(bool value)</code></td>
<td>false</td>
</tr>
<tr>
<td><code>ASSERT_ALMOST_EQUAL(double first, double second, double precision)</code></td>
<td>$</td>
</tr>
<tr>
<td><code>ASSERT_SEQUENCE_EQUAL(first, second)</code></td>
<td>arrays, vectors, lists 相等</td>
</tr>
</tbody>
</table>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="07-Call-Stack-Procedural-Abstraction-and-Unit-Tests.html" class="btn btn-neutral float-left" title="Overview"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="08-Pointers-and-Arrays.html" class="btn btn-neutral float-right" title="Overview">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="07-Call-Stack-Procedural-Abstraction-and-Unit-Tests.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="08-Pointers-and-Arrays.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
