<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>Overview - umich-eecs280-lec-notes-ch</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Overview";
        var mkdocs_page_input_path = "18-Memory-Model-and-Dynamic-Memory.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="index.html" class="icon icon-home"> umich-eecs280-lec-notes-ch
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="index.html">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">01 Command Line Interface (CLI)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="01-Command-Line%20Interface-%28CLI%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="01-Command-Line%20Interface-%28CLI%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="01-Command-Line%20Interface-%28CLI%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="01-Command-Line%20Interface-%28CLI%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="01-Command-Line%20Interface-%28CLI%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="01-Command-Line%20Interface-%28CLI%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="01-Command-Line%20Interface-%28CLI%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="01-Command-Line%20Interface-%28CLI%29.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">02 IDEs</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="02-IDEs.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">03 Compilation (Makefile)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="03-Compilation-%28Makefile%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="03-Compilation-%28Makefile%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="03-Compilation-%28Makefile%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="03-Compilation-%28Makefile%29.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">04 Debuggers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="04-Debuggers.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="04-Debuggers.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="04-Debuggers.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="04-Debuggers.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="04-Debuggers.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="04-Debuggers.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="04-Debuggers.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">05 Version Control (git)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="05-Version-Control-%28git%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="05-Version-Control-%28git%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="05-Version-Control-%28git%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="05-Version-Control-%28git%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="05-Version-Control-%28git%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="05-Version-Control-%28git%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="05-Version-Control-%28git%29.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">06 Text Editors (emacs)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="06-Text-Editors-%28emacs%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="06-Text-Editors-%28emacs%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="06-Text-Editors-%28emacs%29.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="06-Text-Editors-%28emacs%29.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">07 Call Stack Procedural Abstraction and Unit Tests</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="07-Call-Stack-Procedural-Abstraction-and-Unit-Tests.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="07-Call-Stack-Procedural-Abstraction-and-Unit-Tests.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="07-Call-Stack-Procedural-Abstraction-and-Unit-Tests.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="07-Call-Stack-Procedural-Abstraction-and-Unit-Tests.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="07-Call-Stack-Procedural-Abstraction-and-Unit-Tests.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">08 Pointers and Arrays</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="08-Pointers-and-Arrays.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="08-Pointers-and-Arrays.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="08-Pointers-and-Arrays.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="08-Pointers-and-Arrays.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">09 const keyword</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="09-const-keyword.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="09-const-keyword.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">10 Compound objects, ADT and Dynamic Allocation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="10-Compound-objects%2C-ADT-and-Dynamic-Allocation.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="10-Compound-objects%2C-ADT-and-Dynamic-Allocation.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="10-Compound-objects%2C-ADT-and-Dynamic-Allocation.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">11 C strings</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="11-C-strings.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="11-C-strings.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="11-C-strings.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="11-C-strings.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="11-C-strings.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="11-C-strings.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">12 Stream and IO</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="12-Stream-and-IO.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="12-Stream-and-IO.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="12-Stream-and-IO.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="12-Stream-and-IO.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="12-Stream-and-IO.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="12-Stream-and-IO.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">13 ADT in C++</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="13-ADT-in-C%2B%2B.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="13-ADT-in-C%2B%2B.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="13-ADT-in-C%2B%2B.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="13-ADT-in-C%2B%2B.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="13-ADT-in-C%2B%2B.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">14 Derived Classes and Inheritance</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="14-Derived-Classes-and-Inheritance.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="14-Derived-Classes-and-Inheritance.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="14-Derived-Classes-and-Inheritance.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="14-Derived-Classes-and-Inheritance.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="14-Derived-Classes-and-Inheritance.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">15 Polymorphism</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="15-Polymorphism.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="15-Polymorphism.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="15-Polymorphism.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="15-Polymorphism.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="15-Polymorphism.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">16 ContainerADT I</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="16-ContainerADT-I.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="16-ContainerADT-I.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="16-ContainerADT-I.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="16-ContainerADT-I.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="16-ContainerADT-I.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">17 ContainerADT II</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="17-ContainerADT-II.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="17-ContainerADT-II.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="17-ContainerADT-II.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="17-ContainerADT-II.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="17-ContainerADT-II.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">18 Memory Model and Dynamic Memory</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Overview</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#181-globalstatic-localautomatic-and-dynamic-variables">18.1 Global(Static), Local(automatic) and dynamic variables</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1811-globalstatic-variables">18.1.1 Global(static) variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1812-local-automatic-variables">18.1.2 Local (Automatic) variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1813-dynamic-variables">18.1.3 Dynamic variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1814-dynamic-variables">18.1.4 使用 dynamic variables 的原因</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#182-dynamic-memory">18.2 Dynamic Memory 的使用</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1821-new">18.2.1 new</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1822-delete">18.2.2 delete</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#18221-assertnullptr">18.2.2.1 assert(nullptr)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1823-pitfall-double-delete-undefined-behavior">18.2.3 Pitfall: double delete 是 undefined behavior</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1824-pitfall-memory-leak">18.2.4 Pitfall: memory leak!</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#183-program-segments">18.3 Program Segments</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1831-the-little-void">18.3.1 The little void</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1832-text-segment">18.3.2 Text segment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1833-global-segment">18.3.3 Global segment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1834-heap-segment">18.3.4 Heap segment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1835-the-big-void-stack">18.3.5 The BIG VOID(未使用区域) 以及 Stack</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#184-dynamic-arrays">18.4 Dynamic arrays</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1841-delete">18.4.1 delete[]</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Overview</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#181-globalstatic-localautomatic-and-dynamic-variables">18.1 Global(Static), Local(automatic) and dynamic variables</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1811-globalstatic-variables">18.1.1 Global(static) variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1812-local-automatic-variables">18.1.2 Local (Automatic) variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1813-dynamic-variables">18.1.3 Dynamic variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1814-dynamic-variables">18.1.4 使用 dynamic variables 的原因</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#182-dynamic-memory">18.2 Dynamic Memory 的使用</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1821-new">18.2.1 new</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1822-delete">18.2.2 delete</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#18221-assertnullptr">18.2.2.1 assert(nullptr)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1823-pitfall-double-delete-undefined-behavior">18.2.3 Pitfall: double delete 是 undefined behavior</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1824-pitfall-memory-leak">18.2.4 Pitfall: memory leak!</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#183-program-segments">18.3 Program Segments</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1831-the-little-void">18.3.1 The little void</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1832-text-segment">18.3.2 Text segment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1833-global-segment">18.3.3 Global segment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1834-heap-segment">18.3.4 Heap segment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1835-the-big-void-stack">18.3.5 The BIG VOID(未使用区域) 以及 Stack</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#184-dynamic-arrays">18.4 Dynamic arrays</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1841-delete">18.4.1 delete[]</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Overview</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#181-globalstatic-localautomatic-and-dynamic-variables">18.1 Global(Static), Local(automatic) and dynamic variables</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1811-globalstatic-variables">18.1.1 Global(static) variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1812-local-automatic-variables">18.1.2 Local (Automatic) variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1813-dynamic-variables">18.1.3 Dynamic variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1814-dynamic-variables">18.1.4 使用 dynamic variables 的原因</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#182-dynamic-memory">18.2 Dynamic Memory 的使用</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1821-new">18.2.1 new</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1822-delete">18.2.2 delete</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#18221-assertnullptr">18.2.2.1 assert(nullptr)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1823-pitfall-double-delete-undefined-behavior">18.2.3 Pitfall: double delete 是 undefined behavior</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1824-pitfall-memory-leak">18.2.4 Pitfall: memory leak!</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#183-program-segments">18.3 Program Segments</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1831-the-little-void">18.3.1 The little void</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1832-text-segment">18.3.2 Text segment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1833-global-segment">18.3.3 Global segment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1834-heap-segment">18.3.4 Heap segment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1835-the-big-void-stack">18.3.5 The BIG VOID(未使用区域) 以及 Stack</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#184-dynamic-arrays">18.4 Dynamic arrays</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1841-delete">18.4.1 delete[]</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Overview</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#181-globalstatic-localautomatic-and-dynamic-variables">18.1 Global(Static), Local(automatic) and dynamic variables</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1811-globalstatic-variables">18.1.1 Global(static) variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1812-local-automatic-variables">18.1.2 Local (Automatic) variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1813-dynamic-variables">18.1.3 Dynamic variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1814-dynamic-variables">18.1.4 使用 dynamic variables 的原因</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#182-dynamic-memory">18.2 Dynamic Memory 的使用</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1821-new">18.2.1 new</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1822-delete">18.2.2 delete</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#18221-assertnullptr">18.2.2.1 assert(nullptr)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1823-pitfall-double-delete-undefined-behavior">18.2.3 Pitfall: double delete 是 undefined behavior</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1824-pitfall-memory-leak">18.2.4 Pitfall: memory leak!</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#183-program-segments">18.3 Program Segments</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1831-the-little-void">18.3.1 The little void</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1832-text-segment">18.3.2 Text segment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1833-global-segment">18.3.3 Global segment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1834-heap-segment">18.3.4 Heap segment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1835-the-big-void-stack">18.3.5 The BIG VOID(未使用区域) 以及 Stack</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#184-dynamic-arrays">18.4 Dynamic arrays</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1841-delete">18.4.1 delete[]</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Overview</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#181-globalstatic-localautomatic-and-dynamic-variables">18.1 Global(Static), Local(automatic) and dynamic variables</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1811-globalstatic-variables">18.1.1 Global(static) variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1812-local-automatic-variables">18.1.2 Local (Automatic) variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1813-dynamic-variables">18.1.3 Dynamic variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1814-dynamic-variables">18.1.4 使用 dynamic variables 的原因</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#182-dynamic-memory">18.2 Dynamic Memory 的使用</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1821-new">18.2.1 new</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1822-delete">18.2.2 delete</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#18221-assertnullptr">18.2.2.1 assert(nullptr)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1823-pitfall-double-delete-undefined-behavior">18.2.3 Pitfall: double delete 是 undefined behavior</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1824-pitfall-memory-leak">18.2.4 Pitfall: memory leak!</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#183-program-segments">18.3 Program Segments</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1831-the-little-void">18.3.1 The little void</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1832-text-segment">18.3.2 Text segment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1833-global-segment">18.3.3 Global segment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1834-heap-segment">18.3.4 Heap segment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1835-the-big-void-stack">18.3.5 The BIG VOID(未使用区域) 以及 Stack</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#184-dynamic-arrays">18.4 Dynamic arrays</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1841-delete">18.4.1 delete[]</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">19 Managing Dynamic Memory</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="19-Managing-Dynamic-Memory.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="19-Managing-Dynamic-Memory.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="19-Managing-Dynamic-Memory.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="19-Managing-Dynamic-Memory.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">20 Deep Copies and the Big Three</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="20-Deep-Copies-and-the-Big-Three.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="20-Deep-Copies-and-the-Big-Three.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="20-Deep-Copies-and-the-Big-Three.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="20-Deep-Copies-and-the-Big-Three.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">21 Linked List</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="21-Linked-List.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="21-Linked-List.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="21-Linked-List.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="21-Linked-List.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">22 Iterator</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="22-Iterator.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="22-Iterator.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="22-Iterator.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="22-Iterator.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">23 Functors and Imposter Syndrome</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="23-Functors-and-Imposter-Syndrome.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="23-Functors-and-Imposter-Syndrome.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="23-Functors-and-Imposter-Syndrome.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="23-Functors-and-Imposter-Syndrome.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">24 Recursion</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="24-Recursion.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="24-Recursion.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="24-Recursion.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="24-Recursion.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">25 BST and Maps</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="25-BST-and-Maps.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="25-BST-and-Maps.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="25-BST-and-Maps.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="25-BST-and-Maps.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="25-BST-and-Maps.html">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">280 midterm cheatsheet</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="280-midterm-cheatsheet.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="280-midterm-cheatsheet.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="280-midterm-cheatsheet.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="280-midterm-cheatsheet.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="280-midterm-cheatsheet.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="280-midterm-cheatsheet.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="280-midterm-cheatsheet.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="280-midterm-cheatsheet.html">Overview</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">umich-eecs280-lec-notes-ch</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html" class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">18 Memory Model and Dynamic Memory</li>
      <li class="breadcrumb-item active">Overview</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="toc">
<ul>
<li><a href="#18-memory-model-and-dynamic-memory">18 Memory model and Dynamic Memory</a><ul>
<li><a href="#181-globalstatic-localautomatic-and-dynamic-variables">18.1 Global(Static), Local(automatic) and dynamic variables</a><ul>
<li><a href="#1811-globalstatic-variables">18.1.1 Global(static) variables</a></li>
<li><a href="#1812-local-automatic-variables">18.1.2 Local (Automatic) variables</a></li>
<li><a href="#1813-dynamic-variables">18.1.3 Dynamic variables</a></li>
<li><a href="#1814-dynamic-variables">18.1.4 使用 dynamic variables 的原因</a></li>
</ul>
</li>
<li><a href="#182-dynamic-memory">18.2 Dynamic Memory 的使用</a><ul>
<li><a href="#1821-new">18.2.1 new</a></li>
<li><a href="#1822-delete">18.2.2 delete</a><ul>
<li><a href="#18221-assertnullptr">18.2.2.1 assert(nullptr)</a></li>
</ul>
</li>
<li><a href="#1823-pitfall-double-delete-undefined-behavior">18.2.3 Pitfall: double delete 是 undefined behavior</a></li>
<li><a href="#1824-pitfall-memory-leak">18.2.4 Pitfall: memory leak!</a></li>
</ul>
</li>
<li><a href="#183-program-segments">18.3 Program Segments</a><ul>
<li><a href="#1831-the-little-void">18.3.1 The little void</a></li>
<li><a href="#1832-text-segment">18.3.2 Text segment</a></li>
<li><a href="#1833-global-segment">18.3.3 Global segment</a></li>
<li><a href="#1834-heap-segment">18.3.4 Heap segment</a></li>
<li><a href="#1835-the-big-void-stack">18.3.5 The BIG VOID(未使用区域) 以及 Stack</a></li>
</ul>
</li>
<li><a href="#184-dynamic-arrays">18.4 Dynamic arrays</a><ul>
<li><a href="#1841-delete">18.4.1 delete[]</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1 id="18-memory-model-and-dynamic-memory">18 Memory model and Dynamic Memory</h1>
<h2 id="181-globalstatic-localautomatic-and-dynamic-variables">18.1 Global(Static), Local(automatic) and dynamic variables</h2>
<p>回顾：</p>
<ol>
<li>
<p>一个 object 是 memory 中的 a piece of data.</p>
</li>
<li>
<p>一个 object lives at an address in memory</p>
</li>
<li>
<p>一个 object 只能在其 lifetime 被使用，lifetime 取决于 storage duration.</p>
</li>
<li>
<p>c++ 中有三种 storage durations:</p>
</li>
</ol>
<p>▪ Global / static</p>
<p>▪ Local / automatic</p>
<p>▪ Dynamic</p>
<h3 id="1811-globalstatic-variables">18.1.1 Global(static) variables</h3>
<p>有三种：</p>
<ol>
<li>第一种: 在 function/class definition 外的 globle variables. 在 program 运行前就被创造，一直生存到 program 结束。</li>
</ol>
<p><code>c++
   const int SIZE=10;
   int main() {
    //...
   }</code></p>
<ol>
<li>第二种: <code>static</code> within a class definition.</li>
</ol>
<p><code>c++
   class Set {
   private:
    static const int CAPACITY = 100;
    //...
   };</code></p>
<ol>
<li><code>static</code> within a function</li>
</ol>
<p><code>c++
   int main() {
     static const int SIZE = 10;
     //...
   }</code></p>
<h3 id="1812-local-automatic-variables">18.1.2 Local (Automatic) variables</h3>
<p><strong>A local variable lives inside a block <code>{ }</code>.</strong></p>
<p>在 declaration 被 run 的时候被 initialized. 在 block finish 的时候 die.</p>
<h3 id="1813-dynamic-variables">18.1.3 Dynamic variables</h3>
<p>Lifetime 在 runtime 被决定.</p>
<p>Programmer 决定它被 created 以及 destroyed 的时间.</p>
<h3 id="1814-dynamic-variables">18.1.4 使用 dynamic variables 的原因</h3>
<pre><code class="language-c++">int * pointerToThree() {
  int x = 3;
  return &amp;x;
}   

int main() {
    int *z = pointerToThree();
  cout &lt;&lt; *z;
}
</code></pre>
<p>这段代码 error. 因为 <code>pointerToThree()</code> 创造的 <code>x</code> 及其地址作为的指针变量是一个 local variable，在 <code>pointerToThree()</code>  运行结束的时候就无了。因而这片地址上不再是一个 <code>int</code> 了，所以 type error.</p>
<p>因而我们需要 dynamic variable. 我们可以自主控制其 lifetime，这样 pointers to the same object can exist in different scopes. </p>
<p>除了这个好处外，heap 的容量大小也比 stack 要远大。</p>
<h2 id="182-dynamic-memory">18.2 Dynamic Memory 的使用</h2>
<h3 id="1821-new">18.2.1 <code>new</code></h3>
<p><code>new</code> 在 dunamic memory 中<strong>创造一个 object，并 return 指向这个 object 的一个 pointer.</strong></p>
<pre><code class="language-c++">int * pointerToThree() {
  int *p = new int;
  *p = 3;
  return p;
}
</code></pre>
<pre><code class="language-c++">// 或者
int * pointerToThree() {
  int *p = new int(3);
  return p;
}
</code></pre>
<p>在这里，<strong><code>p</code> 是 <code>pointerToThree</code> 的 stack frame 中的一个 local variable！</strong>它的类型是 <code>int *</code>. 一旦 <code>pointerToThree</code> 运行结束，它就 die 了.</p>
<p>而值为 <code>int(3)</code> 的变量则是在 heap 的 dynamic memory 中的一个 <code>int</code> 型 variable。我们将用 <code>int(3)</code> 来称呼它。我们通过使用 <code>new</code> 把 heap 的一段 memory 给 allocate 给了它。<strong>在  <code>pointerToThree</code> 运行结束后，它仍然存在！</strong></p>
<p><code>pointerToThree</code> 运行结束之后，<code>p</code> die 了，<code>p</code> 的 memory 被自动 release 了；但是 <code>p</code> 的值，也就是 <code>int(3)</code> 的地址，被 return 了。</p>
<p><strong>只要我们不手动 <code>delete</code>，<code>int(3)</code> 将始终在 dynamic memory 直到 program 结束！</strong></p>
<p>现在我们调用  <code>pointerToThree</code>，将它返回值分配给 <code>main</code> 中的变量。</p>
<pre><code class="language-c++">int main() {
  int *z = pointerToThree();
  cout &lt;&lt; *z;
    //...
}
</code></pre>
<p>于是 <code>p</code> 的值在 <code>p</code> 死后被 return 给了 <code>main</code> 中的 <code>int *</code> 变量 <code>z</code>.</p>
<h3 id="1822-delete">18.2.2 <code>delete</code></h3>
<p><code>delete</code> 可以 destroy dynamic variables.</p>
<pre><code class="language-c++">int main() {
  int *z = pointerToThree();
  cout &lt;&lt; *z;
    delete z;
}
</code></pre>
<p>需要注意的是：我们写的是 <code>delete z</code>，<code>z</code> 是一个 <code>main</code> 的 stackframe 中的一个 local variable，但其实它做的是 <strong>destroy <code>z</code> 所指向的 dynamic memory 中的 dynamic object</strong>，也就是值为 <code>int(3)</code> 的那个变量！</p>
<p>在我们的 delete 之后：</p>
<ol>
<li><strong><code>z</code> 仍然指向 heap 中的同一位置，<code>z</code> 的值并不会改变！！</strong> 但此时我们已经不能 dereference 它了，这会是一个 undefined behavior.</li>
<li>我们可以重新给 <code>z</code> 赋值</li>
</ol>
<p>我们注意到有一个比较抽象的事情：</p>
<p>我们发现在 <code>delete</code> 后 dereference <code>z</code> 来获取已经释放的 dynamic memory 上的东西仍然是可以的，**只是一个 undefined behavior 而不是一个 error. **</p>
<p>理论上，在 <code>delete</code> 以后，该 object 所占用的 memory 被归还给 operating system 了，用于未来的 allocation。从逻辑上该 object 不再存在.</p>
<p>然而，在物理层面上，该 memory 在被 <code>delete</code> 之后与立即重用之前，其内容可能仍然保留未更改的状态，就是说这个位置的值可能仍然是一个 <code>int(3)</code>. 然而此时 dereferene 是 undefined behavior，是不安全的。</p>
<h4 id="18221-assertnullptr">18.2.2.1 <code>assert(nullptr)</code></h4>
<p>有一个好的做法给指向已经删除的 dynamic object 的 ptr 变量分配 <code>nullptr</code>，这样首先这个 ptr 就不再是一个 dangling pointer 了，其次我们可以在合适的地方 <code>assert</code> 它来 identify problems. </p>
<p>注意：<code>assert(nullptr)</code> 的结果是 segfault，因而它有助于勘探问题。</p>
<pre><code class="language-c++">int main() {
    int *p = new int(100);
  delete p;
  p = nullptr;
  assert(p); //SegError
}
</code></pre>
<h3 id="1823-pitfall-double-delete-undefined-behavior">18.2.3 Pitfall: double <code>delete</code> 是 undefined behavior</h3>
<pre><code class="language-c++">int main() {
  int *p1 = new int(3);
  int *p2 = p1; // p2 现在也指向该 dynamic object
  delete p1;    // delete 了这个 dynamic object
  delete p2; // double delete, Undefined behavior!
}
</code></pre>
<p>这里 <code>p1</code> 和 <code>p2</code> 指向的是同一个 dynamic object，因而只需要也只至多应该 <code>delete</code> 一次。如果我们忘记了，前后 <code>delete</code> 了 <code>p1</code> 又 <code>delete</code> 了 <code>p2</code>，那么就会导致 undefined behavior，并且很可能 runtime error.</p>
<h3 id="1824-pitfall-memory-leak">18.2.4 Pitfall: memory leak!</h3>
<pre><code class="language-c++">int main() {
    int *p1 = new int(1);
    int *p2 = new int(2);
  p1 = p2; // 现在没有东西指向值为 int(1) 的那个 dynamic object 了
  delete p1;
}
// how much memory is leaked? sizeof(int) == 4B.
</code></pre>
<p>Dynamic variables 会一直存在直到被 <code>delete</code>，即便已经没有东西指向它了。</p>
<p>这也意味着：<strong>我们如果不小心把指向一个 dynamic object 的 ptr 变量的值改掉，让它不再指向这个 dynamic object，那么我们就再也无法 <code>delete</code> 它了。</strong>这就叫做一个 <strong>memory leak.</strong></p>
<p>不仅如此，有很多个渠道能够导致这种事情。比如指向 dynamic object 的 ptr 变量出了自己的 scope 死了，但是并没有把值传递出去。</p>
<pre><code class="language-c++">void f() {
    int *p = new int(1);
    cout &lt;&lt; *p;
}

int main() {
    f();    // memory leak
}
</code></pre>
<h2 id="183-program-segments">18.3 Program Segments</h2>
<p>一个 running program 有一个 "address space", 就是一系列 memory locations that are accessible to it.</p>
<p><strong>每个 address space 都 private 于一个 running program，没有其他的 running program 能够 access 或者 modify 它！</strong></p>
<p>除了 heap segment 之外，一个 running program 还有其他的 segments.</p>
<p>Operating system manages <strong>virtual memory</strong>，使得<strong>每个 program 都能够装作它 occupies 整个 address space</strong>，从 address 0 到 address max.</p>
<p><img src="Assets/Screenshot 2024-03-12 at 01.58.14.png" alt="Screenshot 2024-03-12 at 01.58.14" style="zoom:50%;" /></p>
<h3 id="1831-the-little-void">18.3.1 The little void</h3>
<p>大多数 operating systems 都 reserve 了从 0 开始的前几千个 addresses，这部分构成了 <strong>the little void</strong>.</p>
<p>(Ps: address 0 也就是所有 nullptr 存储的地址)</p>
<h3 id="1832-text-segment">18.3.2 Text segment</h3>
<p>这个 segment 包含的是 the machine code (也就是 binary)，包含了整个 compiled program 的 binary code。它的 address 所在位置也很低，仅在 little void 之后。</p>
<h3 id="1833-global-segment">18.3.3 Global segment</h3>
<p>space for the global variables 以及 static variables.</p>
<h3 id="1834-heap-segment">18.3.4 Heap segment</h3>
<p><code>new</code> 和 <code>delete</code> 是 c++ 中我们 interact with heap segment 的方法，而 C 中我们也有类似的方法，<code>malloc()</code> 和 <code>free()</code> 就是 C 的 <code>new</code> 和 <code>delete</code>.</p>
<p>heap segment 中，<strong>每个 heap object 都有自己的 lifetime，与它周围的其他 objects 无关！</strong> 不像 stack frame 中，object 的 lifetime 在其所在的 <code>stack frame</code> 被建立时开始，被 destroy 时结束。</p>
<h3 id="1835-the-big-void-stack">18.3.5 The BIG VOID(未使用区域) 以及 Stack</h3>
<p>The BIG VOID 是在 heap segment 和 stack segment 之间的区域， for the stack and heap to grow. Stack 就是我们熟悉的栈。Stack 在所有 segments 的最顶上。</p>
<h2 id="184-dynamic-arrays">18.4 Dynamic arrays</h2>
<p>我们平时用的 <strong>statically allocated array 的 size 必须是在 compile time 就确定的</strong>，这是 C++ standard. 但是 <strong>dynamically allocated array 的大小可以在 runtime 被确定。</strong></p>
<pre><code class="language-c++">int howMany;
cin &gt;&gt; howMany;
int *arrPtr = new int[howMany];
</code></pre>
<p><strong><code>new</code> 创建的 dynamic array 是一个指向它首元素的 pointer.</strong></p>
<p>但是我们仍然可以使用 <code>[]</code> operator 来获取元素。</p>
<pre><code class="language-c++">int main() {
  cout &lt;&lt; &quot;How many elements? &quot;;
  int howMany;
  cin &gt;&gt; howMany;
  int *arrPtr = new int[howMany];
  for (int i = 0; i &lt; howMany; ++i)
    arrPtr[i] = 42;
}
</code></pre>
<h3 id="1841-delete">18.4.1 <code>delete[]</code></h3>
<p>有一个问题是：runtime environment 是无法 distinguish 在 heap 上指向单个元素和指向 dynamic array 的首元素的指针的。</p>
<p>因而我们需要使用一个特别的 <code>delete[]</code> syntax for arrays.</p>
<pre><code class="language-c++">int main() {
    int *ptr1 = new int(42);
    int *ptr2 = new int[howMany];
    //...
    delete ptr1;
    delete[] ptr2;
}
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="18-Memory-Model-and-Dynamic-Memory.html" class="btn btn-neutral float-left" title="Overview"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="19-Managing-Dynamic-Memory.html" class="btn btn-neutral float-right" title="Overview">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="18-Memory-Model-and-Dynamic-Memory.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="19-Managing-Dynamic-Memory.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
